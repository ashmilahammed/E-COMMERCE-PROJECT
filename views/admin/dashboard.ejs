<%- include("../../views/partials/admin/header") %>


    <div>
        <h2>Dashboard </h2>
        <p>Whole data about your business here</p>
    </div>

    <style>
        /* Add this to your stylesheet or in a <style> tag in your header */
        .loading-state {
            position: relative;
        }

        .loading-state::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
        }

        .loading-state::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4361ee;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 2;
        }

        @keyframes spin {
            0% {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            100% {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }
    </style>

    <div class="container py-4">
        <!-- Global Time Period Filter -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Dashboard Overview</h5>
                        <div class="form-group mb-0">
                            <select id="globalFilter" class="form-select" onchange="updateAllCharts()">
                                <option value="weekly" selected>Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="yearly">Yearly</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Cards with Original Style -->
        <div class="row mb-4">
            <div class="col-lg-3">
                <div class="card card-body mb-4">
                    <article class="icontext">
                        <span class="icon icon-sm rounded-circle bg-primary-light"><i
                                class="text-primary material-icons md-monetization_on"></i></span>
                        <div class="text">
                            <h6 class="mb-1 card-title">Revenue</h6>
                            <span id="revenueValue">₹
                            </span>
                            <span class="text-sm">
                                Including Shipping fees
                            </span>
                        </div>
                    </article>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="card card-body mb-4">
                    <article class="icontext">
                        <span class="icon icon-sm rounded-circle bg-success-light"><i
                                class="text-success material-icons md-local_shipping"></i></span>
                        <div class="text">
                            <h6 class="mb-1 card-title">Orders</h6>
                            <span id="ordersValue"> orders</span>
                            <span class="text-sm">
                                Delivered Orders
                            </span>
                        </div>
                    </article>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="card card-body mb-4">
                    <article class="icontext">
                        <span class="icon icon-sm rounded-circle bg-warning-light"><i
                                class="text-warning material-icons md-qr_code"></i></span>
                        <div class="text">
                            <h6 class="mb-1 card-title">Products</h6>
                            <span> products </span>
                            <span class="text-sm">
                                In 3 Categories
                            </span>
                        </div>
                    </article>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="card card-body mb-4">
                    <article class="icontext">
                        <span class="icon icon-sm rounded-circle bg-info-light"><i
                                class="text-info material-icons md-shopping_basket"></i></span>
                        <div class="text">
                            <h6 class="mb-1 card-title">Users</h6>
                            <span> users </span>
                            <span class="text-sm">
                                Active accounts
                            </span>
                        </div>
                    </article>
                </div>
            </div>
        </div>

        <!-- Sales Revenue Line Chart -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title mb-3">Sales Revenue</h5>
                        <div style="height: 300px">
                            <canvas id="salesChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Pie Chart & Orders Bar Chart -->
        <div class="row mb-4">
            <div class="col-md-6 mb-3">
                <div class="card shadow-sm h-100">
                    <div class="card-body">
                        <h5 class="card-title mb-3">Category Performance</h5>
                        <div style="height: 260px">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 mb-3">
                <div class="card shadow-sm h-100">
                    <div class="card-body">
                        <h5 class="card-title mb-3">Orders Overview</h5>
                        <div style="height: 260px">
                            <canvas id="ordersChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <!-- Best Selling Products -->
        <div class="row mb-4">
            <div class="col-md-8 mb-3">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title mb-3">Best Selling Products</h5>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Product</th>
                                        <th>Category</th>
                                        <th>Price</th>
                                        <th>Sold</th>
                                    </tr>
                                </thead>
                                <tbody id="bestSellingTable">
                                    bestSellingProducts
                                    <tr>
                                        <td>productName</td>
                                        <td>category</td>
                                        <td>₹product.price</td>
                                        <td> product.totalSales</td>
                                    </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title mb-3">Top Performers</h5>
                        <div class="mb-4">
                            <p class="mb-1">Best Selling Brand</p>
                            <h5 id="bestBrand" class="mb-0"> bestBrand </h5>
                            <small id="bestBrandSales" class="text-muted"> sales</small>
                        </div>
                        <div>
                            <p class="mb-1">Best Selling Category</p>
                            <h5 id="bestCategory" class="mb-0">bestCategory</h5>
                            <small id="bestCategorySales" class="text-muted"> bestCategorySales - sales</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>



    <%- include("../../views/partials/admin/footer") %>